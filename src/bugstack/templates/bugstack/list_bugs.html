{% extends 'base.html' %}


{% block content %}
<form class="d-flex" action="{% url 'search-bugs' %}" method=GET>
    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="q" value="{{ q }}">
    <button class="btn btn-outline-success btn-sm" type="submit">Search</button>
  </form>
<br><br>
{% for bug in bugs_page %}
    {% if bug.is_active %}
        <div class="card">
            <div class="card-header">{{ bug.project.name }}
              <a href="{% url 'update-bug' bug.id %}" class="btn btn-outline-secondary btn-sm" style="float: right;">Update Bug</a>
              <a href="{% url 'squash-bug' bug.id %}" class="btn btn-outline-success btn-sm" style="float: right; margin-right:15px;">Squash Bug</a>    
            </div>
            <div class="card-body">
              <h5 class="card-title">{{ bug.name }}</h5>
              <p class="card-text">{{ bug.description }}</p>
              <a href="#" class="btn btn-outline-secondary btn-sm">More info</a>
            </div>
        </div>
        <br><br>
    {% endif %}
{% endfor %}
<hr>
{% if bugs_page.has_other_pages %}
<nav aria-label="...">
    <ul class="pagination">

        {% if bugs_page.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ bugs_page.previous_page_number }}" aria-label="{{ bugs_page.previous_page_number }}">&#10094;Previous</a>
      </li>
        {% endif %}
        {% for page in custom_range %}
        {% if page == bugs_page.number %}
        <li class="page-item active" aria-current="page"><a class="page-link" href="?page={{ page }}">{{ page }}</a></li>
          {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ page }}">{{ page }}</a></li>
          {% endif %}  
        {% endfor %}      
        {% if bugs_page.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ bugs_page.next_page_number }}">Next &#10095;</a></li>
        {% endif %}
    </ul>
  </nav>
{% endif %}


{% endblock %}